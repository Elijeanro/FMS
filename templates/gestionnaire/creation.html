{% extends 'bases/base1.html' %}

{% load static %}

{% block title %}
Enrégistrer {{sujet}}
{% endblock title %}


{% block contenu %}
<div class="wrapper">
  <div class="section section-hero section-shaped">
    <div class="container pt-lg-3 bg-gradient-gray">
      <div class="row justify-content-center">
        <div class="col-lg-5">
          {% if messages %}
          <ul class="messages">
            {% for message in messages %}
            <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}
            </li>
            {% endfor %}
          </ul>
          {% endif %}
          <form role="form" method="post">
            {% csrf_token %}

            <div class="form-group mb-4">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="ni ni-laptop"></i>
                  <h5>Enregistrer {{sujet}}</h5>
                </span>
              </div>
              {{ form.as_p }}
            </div>

            <div class="text-center mb-6">
              <button type="submit" class="btn btn-success mt-4">ENREGISTRER</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {

    var enginReleveSelect = document.getElementById("engin");
    // Écoutez le changement de sélection du champ engin_releve
    enginReleveSelect.addEventListener("change", function () {
      var selectedValue = enginReleveSelect.value;
      
      if (selectedValue === "create_engin") {
        // Redirigez vers la page d'ajout d'un nouvel engin
        window.location.href = "{% url 'gestionnaire:create_engin' grade_id %}";  // Assurez-vous que 'create_engin' correspond à votre URL
      }
    });

    // Ajoutez des écouteurs pour d'autres champs ici
    // par exemple, pour le champ "fournisseur"
    var fournisseurSelect = document.getElementById("fournisseur");
    fournisseurSelect.addEventListener("change", function () {
      var selectedValue = fournisseurSelect.value;

      if (selectedValue === "create_fournisseur") {
        window.location.href = "{% url 'gestionnaire:create_fournisseur' grade_id %}";
      }
    });

    var marqueSelect = document.getElementById("marque");
    marqueSelect.addEventListener("change", function () {
      var selectedValue = marqueSelect.value;

      if (selectedValue === "create_marque") {
        window.location.href = "{% url 'gestionnaire:create_marque' grade_id %}";
      }
    });

    var modeleSelect = document.getElementById("modele");
    modeleSelect.addEventListener("change", function () {
      var selectedValue = modeleSelect.value;

      if (selectedValue === "create_modele") {
        window.location.href = "{% url 'gestionnaire:create_modele' grade_id %}";
      }
    });

    var type_enginSelect = document.getElementById("type_engin");
    type_enginSelect.addEventListener("change", function () {
      var selectedValue = type_enginSelect.value;

      if (selectedValue === "create_type_engin") {
        window.location.href = "{% url 'gestionnaire:create_type_engin' grade_id %}";
      }
    });

    var type_maintenanceSelect = document.getElementById("type_maint");
    type_maintenanceSelect.addEventListener("change", function () {
      var selectedValue = type_maintenanceSelect.value;

      if (selectedValue === "create_type_maintenance") {
        window.location.href = "{% url 'gestionnaire:create_type_maintenance' grade_id %}";
      }
    });

    var personneSelect = document.getElementById("personne");
    personneSelect.addEventListener("change", function () {
      var selectedValue = personneSelect.value;

      if (selectedValue === "create_personne") {
        window.location.href = "{% url 'gestionnaire:create_personne' grade_id %}";
      }
    });

    var gradeSelect = document.getElementById("grade");
    gradeSelect.addEventListener("change", function () {
      var selectedValue = gradeSelect.value;

      if (selectedValue === "create_grade") {
        window.location.href = "{% url 'administrateur:create_grade' %}";
      }
    });

    var info_enginSelect = document.getElementById("info_engin");
    info_enginSelect.addEventListener("change", function () {
      var selectedValue = info_enginSelect.value;

      if (selectedValue === "create_info_engin") {
        window.location.href = "{% url 'gestionnaire:create_info_engin' grade_id %}";
      }
    });

    var etat_enginSelect = document.getElementById("etat_engin");
    etat_enginSelect.addEventListener("change", function () {
      var selectedValue = etat_enginSelect.value;

      if (selectedValue === "create_etat_engin") {
        window.location.href = "{% url 'gestionnaire:create_etat_engin' grade_id %}";
      }
    });
  });
  
</script>

{% endblock contenu %}